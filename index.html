<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>How Much Will DOGE Save You?</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
  <style>
    .tax-box {
      background: #ffffff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 15px;
    }
    .breakdown-table th, .breakdown-table td {
      padding: 6px;
      border: 1px solid #ddd;
      text-align: center;
      white-space: nowrap;
    }
    .breakdown-table th {
      background-color: #f0f0f0;
    }
    .breakdown-table-mobile {
      font-size: 1rem;
      width: 100%;
      margin-bottom: 20px;
    }
    .breakdown-table-mobile th, .breakdown-table-mobile td {
      padding: 2px 6px;
      text-align: left;
      white-space: nowrap;
    }
    .breakdown-table-mobile th {
      background-color: #f0f0f0;
      font-size: 0.875rem;
    }
    .current-cell {
      background-color: #f9f9f9;
    }
    .new-cell {
      background-color: #f9f9f9;
    }

    .bg-light-blue {
      background-color: #e5e7eb; /* Example: Light Blue */
      color: #1a2027; /* Dark Blue Text for contrast on light blue */
    }

    .bg-selected-blue {
      background-color: #007bff; /* Brighter, bolder blue */
      color: #ffffff; /* White Text for contrast on blue */
    }

    .text-dark-blue {
      color: #1a2027;
    }

    .savings-cell {
      background-color: #d0eaff; /* Yellow background for emphasis */
      font-weight: bold;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 50;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.5);
    }
    .modal-content {
      background-color: #fefefe;
      margin: 15% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 600px;
      border-radius: 8px;
    }
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }
    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }
    .separator {
      margin: 0 2px;
      color: #aaa;
    }

    .desktop-only {
      display: block;
    }

    .mobile-only {
      display: none;
    }

    @media (max-width: 640px) {
      .desktop-only {
        display: none;
      }
      .mobile-only {
        display: block;
      }
      .grid-cols-3 {
        grid-template-columns: repeat(1, minmax(0, 1fr));
      }
      .max-w-4xl {
        max-width: 100%;
      }
    }

    /* Custom slider styling */
    input[type="range"] {
      -webkit-appearance: none;
      height: 15px;
      border-radius: 10px;
      background: #e5e7eb;
      outline: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 15px;
      height: 15px;
      border-radius: 50%;
      background: #007bff;
      cursor: pointer;
      border: 1px solid white;
      box-shadow: 0 0 2px rgba(0,0,0,0.2);
    }

    input[type="range"]::-moz-range-thumb {
      width: 15px;
      height: 15px;
      border-radius: 50%;
      background: #007bff;
      cursor: pointer;
      border: 1px solid white;
      box-shadow: 0 0 2px rgba(0,0,0,0.2);
    }

    .income-display {
      font-size: 1.25rem;
      font-weight: bold;
      color: #007bff;
      text-align: center;
      margin: 0.5rem 0;
    }
  </style>
</head>

<body class="bg-gray-50">

  <!-- Desktop only -->
  <div class="max-w-4xl mx-auto p-6 space-y-6 desktop-only">
    <!-- Tax Cut Options -->	
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-xl font-bold mb-4">How Much Federal Spending Will DOGE Cut?</h2>
      <div class="grid grid-cols-3 gap-4 mb-4">
        <button onclick="setTaxCut(20, 'desktop')" id="btn20Desktop" class="bg-light-blue text-dark-blue px-4 py-2 rounded-lg text-xl font-bold hover:bg-blue-200">$20B</button>
        <button onclick="setTaxCut(100, 'desktop')" id="btn100Desktop" class="bg-selected-blue text-white px-4 py-2 rounded-lg text-xl font-bold hover:bg-blue-200">$100B</button>
        <button onclick="setTaxCut(1000, 'desktop')" id="btn1000Desktop" class="bg-light-blue text-dark-blue px-4 py-2 rounded-lg text-xl font-bold hover:bg-blue-200">$1T</button>
      </div>
      <input type="hidden" id="taxCutDesktop" value="100">
    </div>

    <!-- Input Fields -->
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-xl font-bold mb-4">How Much Will You Save?</h2>
      <div class="grid grid-cols-3 gap-6">
        <div>
          <label class="block text-sm font-medium mb-1">Marital Status:</label>
          <select id="maritalStatusDesktop" class="w-full p-2 border rounded" oninput="calculateTaxes('desktop')">
            <option value="single">Single</option>
            <option value="married" selected>Married (Jointly)</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Income ($):</label>
          <input type="range" id="incomeDesktop" min="0" max="1000000" value="100000" class="w-full" oninput="formatAndCalculate('desktop')">
          <div id="incomeValueDesktop" class="text-center mt-2">$100,000</div>
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Tax Reduction:</label>
          <select id="taxReductionDesktop" class="w-full p-2 border rounded" oninput="calculateTaxes('desktop')">
            <option value="all" selected>All Brackets</option>
            <option value="top4">Top 4 Brackets</option>
          </select>
        </div>
      </div>
    </div>
	
    <!-- Tax Summary -->
    <div class="bg-white rounded-lg shadow p-6">
      <div class="grid grid-cols-3 gap-4">
        <div class="p-4 rounded current-cell">
          <h4 class="font-medium mb-2">Current Tax</h4>
          <div id="currentTaxDesktop" class="text-xl"></div>
        </div>
        <div class="p-4 rounded new-cell">
          <h4 class="font-medium mb-2">New Tax (After Cut)</h4>
          <div id="newTaxDesktop" class="text-xl"></div>
        </div>
        <div class="p-4 rounded savings-cell">
          <h4 class="font-medium mb-2">Annual Savings</h4>
          <div id="savingsDesktop" class="text-xl"></div>
        </div>
      </div>
    </div>

    <!-- Tax Breakdown -->
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-xl font-bold mb-4">Detailed Tax Breakdown</h2>
      <div class="overflow-x-auto">
        <table class="w-full breakdown-table" id="breakdownTableDesktop"></table>
      </div>
    </div>
  </div>

  <!-- Mobile only -->
  <div class="max-w-lg mx-auto p-4 space-y-5 mobile-only">
    <!-- Header -->
    <h1 class="text-xl font-bold text-center mb-4">How Much Can DOGE Save You?</h1>

    <!-- Tax Cut Options -->
    <div class="bg-white rounded-lg shadow p-4">
      <h2 class="text-base font-medium mb-3">Cut federal waste by</h2>
      <div class="flex justify-between space-x-2">
        <button onclick="setTaxCut(20, 'mobile')" id="btn20Mobile" class="flex-1 bg-light-blue text-dark-blue px-2 py-3 rounded-lg text-lg font-bold">$20B</button>
        <button onclick="setTaxCut(100, 'mobile')" id="btn100Mobile" class="flex-1 bg-selected-blue text-white px-2 py-3 rounded-lg text-lg font-bold">$100B</button>
        <button onclick="setTaxCut(1000, 'mobile')" id="btn1000Mobile" class="flex-1 bg-light-blue text-dark-blue px-2 py-3 rounded-lg text-lg font-bold">$1T</button>
      </div>
      <input type="hidden" id="taxCutMobile" value="100">
      <div class="mt-5">
        <label class="block text-base font-medium mb-3">Use savings to reduce income tax rates</label>
        <div class="flex space-x-2">
          <button onclick="setBrackets('all', 'mobile')" id="allMobile" class="flex-1 bg-light-blue text-dark-blue px-4 py-2 rounded-lg text-base font-bold">All Brackets</button>
          <button onclick="setBrackets('top4', 'mobile')" id="top4Mobile" class="flex-1 bg-selected-blue text-white px-4 py-2 rounded-lg text-base font-bold">Top 4</button>
        </div>
      </div>
    </div>

    <!-- Input Fields -->
    <div class="bg-white rounded-lg shadow p-4">
      <h2 class="text-base font-medium mb-3">Your status and income</h2>
      <div class="space-y-3">
        <div>
          <div class="flex space-x-2">
            <button onclick="setMaritalStatus('single', 'mobile')" id="singleMobile" class="flex-1 bg-light-blue text-dark-blue px-4 py-2 rounded-lg text-base font-bold">Single</button>
            <button onclick="setMaritalStatus('married', 'mobile')" id="marriedMobile" class="flex-1 bg-selected-blue text-white px-4 py-2 rounded-lg text-base font-bold">Married</button>
          </div>
        </div>
        <div>
          <div class="income-display" id="incomeValueMobile">$100,000</div>
          <input type="range" 
                 id="incomeMobile" 
                 min="0" 
                 max="1000000" 
                 value="100000" 
                 step="1000"
                 class="w-full" 
                 oninput="formatAndCalculate('mobile')">
          <div class="flex justify-between text-sm text-gray-600 px-1">
            <span>$0</span>
            <span>$1M</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Sticky Tax Summary -->
    <div class="sticky-summary bg-white shadow-lg rounded-lg p-4 border-t">
      <div class="grid grid-cols-1 gap-2s text-center">
        <div class="p-2 rounded savings-cell">
          <div class="text-xl font-medium mb-1">Your Savings</div>
          <div id="savingsMobile" class="text-2xl font-bold"></div>
        </div>
      </div>
    </div>

    <!-- Tax Breakdown -->
    <div class="bg-white rounded-lg shadow p-4 overflow-x-auto">
      <h2 class="text-lg font-bold mb-3">Tax Breakdown</h2>
      <div id="breakdownTableMobile"></div>
    </div>
  </div>

  <!-- Info Link -->
  <footer class="text-center mt-6">
    <button id="infoBtn" class="text-blue-500 hover:underline">Learn More</button>
    <span class="separator"></span>
    <a href="https://github.com/pbrunelle/doge-tax-cuts" target="_blank" class="ml-4 text-black hover:underline">
      <svg class="inline-block w-6 h-6 mr-1" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.385.6.11.82-.26.82-.577v-2.17c-3.338.726-4.042-1.61-4.042-1.61-.546-1.387-1.333-1.757-1.333-1.757-1.09-.746.083-.73.083-.73 1.205.084 1.84 1.237 1.84 1.237 1.07 1.835 2.807 1.305 3.492.998.108-.775.42-1.305.763-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.467-2.38 1.235-3.22-.123-.303-.535-1.523.117-3.176 0 0 1.008-.322 3.3 1.23.957-.266 1.98-.398 3-.403 1.02.005 2.043.137 3 .403 2.29-1.552 3.297-1.23 3.297-1.23.653 1.653.24 2.873.118 3.176.77.84 1.233 1.91 1.233 3.22 0 4.61-2.803 5.625-5.475 5.92.43.37.823 1.102.823 2.222v3.293c0 .32.22.694.825.577C20.565 21.8 24 17.3 24 12c0-6.63-5.37-12-12-12z"/>
      </svg>
      GitHub
    </a>
    <span class="separator"></span>
    <span class="ml-4">Pierre Brunelle</span>
  </footer>

  <!-- Modal -->
  <div id="infoModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 class="text-xl font-bold mb-4">Information on Computations and Assumptions</h2>
      <section>
        <h3 class="text-lg font-bold mb-2">Computations</h3>
        <ul class="list-disc pl-5">
          <li>2025 tax brackets are used in all calculations.</li>
          <li>For simplicity, exemptions and deductions are not modeled.</li>
        </ul>
      </section>
      <section>
        <h3 class="text-lg font-bold mb-2">Assumptions</h3>
        <ul class="list-disc pl-5">
          <li>All savings are assumed to be passed to taxpayers in the form of income tax cuts.</li>
          <li>When choosing to reduce all brackets, it is estimated that a 1 percentage point reduction costs $111.3B.</li>
          <li>When choosing to reduce only the top 4 brackets, it is estimated that a 2 percentage point reduction costs $57.3B.</li>
        </ul>
      </section>
      <section>
        <h3 class="text-lg font-bold mb-2">References</h3>
        <ul class="list-disc pl-5">
          <li><a href="https://www.cbo.gov/budget-options/58634" target="_blank">CBO Budget Options</a></li>
          <li><a href="https://www.irs.gov/newsroom/irs-releases-tax-inflation-adjustments-for-tax-year-2025" target="_blank">IRS Tax Inflation Adjustments for Tax Year 2025</a></li>
        </ul>
      </section>
    </div>
  </div>

  <script>
    // 2025 tax brackets - https://www.irs.gov/newsroom/irs-releases-tax-inflation-adjustments-for-tax-year-2025
    const TAX_BRACKETS = {
      single: [
        { min: 0, max: 11925, rate: 0.10 },
        { min: 11925, max: 48475, rate: 0.12 },
        { min: 48475, max: 103350, rate: 0.22 },
        { min: 103350, max: 197300, rate: 0.24 },
        { min: 197300, max: 250525, rate: 0.32 },
        { min: 250525, max: 626350, rate: 0.35 },
        { min: 626350, max: Infinity, rate: 0.37 }
      ],
      married: [
        { min: 0, max: 23850, rate: 0.10 },
        { min: 23850, max: 96950, rate: 0.12 },
        { min: 96950, max: 206700, rate: 0.22 },
        { min: 206700, max: 394600, rate: 0.24 },
        { min: 394600, max: 501050, rate: 0.32 },
        { min: 501050, max: 751600, rate: 0.35 },
        { min: 751600, max: Infinity, rate: 0.37 }
      ]
    };

    const REVENUE_REDUCTION_PER_PERCENT_ALL = 111.3;
    const REVENUE_REDUCTION_PER_PERCENT_TOP4 = 0.5 * 57.3;

    function calculateBracketTax(income, brackets) {
      let remaining = income;
      let breakdown = [];
      let index = 1;
      
      for (const bracket of brackets) {
        if (income > bracket.min) {
          const taxable = Math.min(remaining, bracket.max - bracket.min);
          const tax = taxable * bracket.rate;
          breakdown.push({
            bracket: index,
            range: `${bracket.min.toLocaleString()} - ${bracket.max === Infinity ? '∞' : bracket.max.toLocaleString()}`,
            taxable,
            rate: formatRate(bracket.rate * 100),
            tax
          });
          remaining -= taxable;
          index++;
          if (remaining <= 0) break;
        }
      }
      return breakdown;
    }

    function adjustBrackets(brackets, savings, reductionType) {
      const rateReduction = reductionType === 'all' 
        ? savings / REVENUE_REDUCTION_PER_PERCENT_ALL / 100 
        : savings / REVENUE_REDUCTION_PER_PERCENT_TOP4 / 100;

      return brackets.map((b, index) => ({
        min: b.min,
        max: b.max,
        rate: reductionType === 'all' || index >= 3 ? Math.max(b.rate - rateReduction, 0) : b.rate
      }));
    }

    function formatRate(rate) {
      return rate % 1 === 0 ? `${rate}%` : `${rate.toFixed(1)}%`;
    }

    function setTaxCut(amount, device) {
      const buttons = document.querySelectorAll(`[id^="btn"]`);
      buttons.forEach(button => {
        button.classList.remove('bg-selected-blue', 'text-white');
        button.classList.add('bg-light-blue', 'text-dark-blue');
      });

      const selectedButtons = document.querySelectorAll(`[id="btn${amount}Desktop"], [id="btn${amount}Mobile"]`);
      selectedButtons.forEach(button => {
        button.classList.remove('bg-light-blue', 'text-dark-blue');
        button.classList.add('bg-selected-blue', 'text-white');
      });

      document.getElementById(`taxCut${device.charAt(0).toUpperCase() + device.slice(1)}`).value = amount;
      calculateTaxes(device);
    }

    function renderBreakdownTable(currentBreakdown, newBreakdown, device) {
      const table = document.getElementById(`breakdownTable${device.charAt(0).toUpperCase() + device.slice(1)}`);
      let html = `
        <thead>
          <tr>
            <th>Bracket</th>
            <th>Range</th>
            <th>Taxable</th>
            <th class="current-cell">Rate (Current)</th>
            <th class="current-cell">Tax (Current)</th>
            <th class="new-cell">Rate (New)</th>
            <th class="new-cell">Tax (New)</th>
          </tr>
        </thead>
        <tbody>
      `;

      let totalTaxable = 0;
      let totalCurrentTax = 0;
      let totalNewTax = 0;

      currentBreakdown.forEach((cur, i) => {
        const nw = newBreakdown[i] || {};
        totalTaxable += cur.taxable;
        totalCurrentTax += cur.tax;
        totalNewTax += nw.tax || 0;

        html += `
          <tr>
            <td>${cur.bracket}</td>
            <td>${cur.range}</td>
            <td>$${Math.round(cur.taxable).toLocaleString('en-US')}</td>
            <td class="current-cell">${cur.rate}</td>
            <td class="current-cell">$${Math.round(cur.tax).toLocaleString('en-US')}</td>
            <td class="new-cell">${nw.rate || ''}</td>
            <td class="new-cell">$${Math.round(nw.tax || 0).toLocaleString('en-US')}</td>
          </tr>
        `;
      });

      html += `
        </tbody>
        <tfoot>
          <tr>
            <td colspan="2" class="text-right font-medium">Total</td>
            <td>$${Math.round(totalTaxable).toLocaleString('en-US')}</td>
            <td class="current-cell"></td>
            <td class="current-cell">$${Math.round(totalCurrentTax).toLocaleString('en-US')}</td>
            <td class="new-cell"></td>
            <td class="new-cell">$${Math.round(totalNewTax).toLocaleString('en-US')}</td>
          </tr>
        </tfoot>
      `;

      table.innerHTML = html;
      return { totalCurrentTax, totalNewTax };
    }

    function renderBreakdownTableMobile(currentBreakdown, newBreakdown) {
      const table = document.getElementById('breakdownTableMobile');
      let html = "";

      let totalTaxable = 0;
      let totalCurrentTax = 0;
      let totalNewTax = 0;

      currentBreakdown.forEach((cur, i) => {
        const nw = newBreakdown[i] || {};
        totalTaxable += cur.taxable;
        totalCurrentTax += cur.tax;
        totalNewTax += nw.tax || 0;

        html += `
          <h3 class="font-medium">Bracket ${cur.bracket}</h3>
          <div class="mt-3">
          <table class="breakdown-table-mobile">
            <colgroup>
              <col style="width: 50%;">
              <col style="width: 50%;">
            </colgroup>
            <tbody>
              <tr>
                <th>Range</th>
                <td>${cur.range}</td>
              </tr>
              <tr>
                <th>Taxable</th>
                <td>$${Math.round(cur.taxable).toLocaleString('en-US')}</td>
              </tr>
              <tr>
                <th>Current Rate</th>
                <td>${cur.rate}</td>
              </tr>
              <tr>
                <th>Current Tax</th>
                <td>$${Math.round(cur.tax).toLocaleString('en-US')}</td>
              </tr>
              <tr>
                <th>Rate After Cut</th>
                <td>${nw.rate || ''}</td>
              </tr>
              <tr">
                <th>Tax After Cut</th>
                <td>$${Math.round(nw.tax || 0).toLocaleString('en-US')}</td>
              </tr>
            </tbody>
          </table>
        `;
      });

      html += `
        <h3 class="font-medium">Total</h3>
        <div class="mt-3">
        <table class="breakdown-table-mobile">
          <colgroup>
            <col style="width: 50%;">
            <col style="width: 50%;">
          </colgroup>
          <tbody>
            <tr>
              <th>Taxable</th>
              <td>$${Math.round(totalTaxable).toLocaleString('en-US')}</td>
            </tr>
            <tr>
              <th>Current Tax</th>
              <td>$${Math.round(totalCurrentTax).toLocaleString('en-US')}</td>
            </tr>
            <tr>
              <th>Tax After Cuts</th>
              <td>$${Math.round(totalNewTax).toLocaleString('en-US')}</td>
            </tr>
          </tbody>
        </table>
      `;

      table.innerHTML = html;
      return { totalCurrentTax, totalNewTax };
    }

    function formatAndCalculate(device) {
      formatIncome(device);
      calculateTaxes(device);
    }

    function formatIncome(device) {
      const incomeField = document.getElementById(`income${device.charAt(0).toUpperCase() + device.slice(1)}`);
      let value = incomeField.value;
      document.getElementById(`incomeValue${device.charAt(0).toUpperCase() + device.slice(1)}`).textContent = `$${parseFloat(value).toLocaleString('en-US')}`;
    }

    function setMaritalStatus(status, device) {
      if (device === 'mobile') {
        const buttons = document.querySelectorAll(`#singleMobile, #marriedMobile`);
        buttons.forEach(button => {
          button.classList.remove('bg-selected-blue', 'text-white');
          button.classList.add('bg-light-blue', 'text-dark-blue');
        });

        const selectedButton = document.getElementById(`${status}Mobile`);
        selectedButton.classList.remove('bg-light-blue', 'text-dark-blue');
        selectedButton.classList.add('bg-selected-blue', 'text-white');
      }
      calculateTaxes(device);
    }

    function setBrackets(bracket, device) {
      if (device === 'mobile') {
        const buttons = document.querySelectorAll(`#allMobile, #top4Mobile`);
        buttons.forEach(button => {
          button.classList.remove('bg-selected-blue', 'text-white');
          button.classList.add('bg-light-blue', 'text-dark-blue');
        });

        const selectedButton = document.getElementById(`${bracket}Mobile`);
        selectedButton.classList.remove('bg-light-blue', 'text-dark-blue');
        selectedButton.classList.add('bg-selected-blue', 'text-white');
      }
      calculateTaxes(device);
    }

    function calculateTaxes(device) {
      const incomeField = document.getElementById(`income${device.charAt(0).toUpperCase() + device.slice(1)}`);
      let income = parseFloat(incomeField.value) || 0;
      let maritalStatus;
      let reductionType;
      if (device === 'desktop') {
        maritalStatus = document.getElementById(`maritalStatus${device.charAt(0).toUpperCase() + device.slice(1)}`).value;
        reductionType = document.getElementById(`taxReduction${device.charAt(0).toUpperCase() + device.slice(1)}`).value;
      } else {
        maritalStatus = document.querySelector('#singleMobile.bg-selected-blue') ? 'single' : 'married';
        reductionType = document.querySelector('#allMobile.bg-selected-blue') ? 'all' : 'top4';
      }
      const selectedBrackets = TAX_BRACKETS[maritalStatus];
      const taxCut = parseFloat(document.getElementById(`taxCut${device.charAt(0).toUpperCase() + device.slice(1)}`).value);
      

      const currentBreakdown = calculateBracketTax(income, selectedBrackets);
      const newBreakdown = calculateBracketTax(income, adjustBrackets(selectedBrackets, taxCut, reductionType));
      
      const { totalCurrentTax, totalNewTax } = renderBreakdownTable(currentBreakdown, newBreakdown, device);
      renderBreakdownTableMobile(currentBreakdown, newBreakdown);

      document.getElementById("currentTaxDesktop").textContent = 
        `$${Math.round(totalCurrentTax).toLocaleString('en-US')}`;
      document.getElementById("newTaxDesktop").textContent = 
        `$${Math.round(totalNewTax).toLocaleString('en-US')}`;
      document.getElementById("savingsDesktop").textContent = 
        `$${Math.round(totalCurrentTax - totalNewTax).toLocaleString('en-US')}`;

      document.getElementById("savingsMobile").textContent = 
        `$${Math.round(totalCurrentTax - totalNewTax).toLocaleString('en-US')}`;
    }

    // Initialize calculations on page load
    window.onload = () => {
      calculateTaxes('desktop');
      setMaritalStatus('married', 'mobile');
      setBrackets('all', 'mobile');
    };

    // Get the modal
    var modal = document.getElementById("infoModal");

    // Get the button that opens the modal
    var btn = document.getElementById("infoBtn");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks the button, open the modal
    btn.onclick = function() {
      modal.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
      modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
  </script>
</body>
</html>